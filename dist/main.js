(()=>{function e(e,t,r){$.get("https://min-api.cryptocompare.com/data/histoday?fsym="+e+"&tsym="+t+"&limit=2000&aggregate=1&toTs="+r+"&e="+exchange,(function(o,n){convert=0;var l=[],c=[],h=[],u=[],m=[],p=[],d=[],y=o.Data[2e3].time,f=new Date(1e3*y),g=(f.getHours(),"0"+f.getMinutes()),v="0"+f.getSeconds(),D=(g.substr(-2),v.substr(-2),o.Data[2e3].close);if($(".priceOutput").html(" "+D+" "+t),$(".dateOutput").html(" "+f),"divide"===o.ConversionType.type)!function(e,t,r){$.get("https://min-api.cryptocompare.com/data/histoday?fsym="+e+"&tsym="+t+"&limit=2000&aggregate=1&toTs="+r+"&e="+exchange+"&tryConversion=false",(function(r,o){convert=1;var n=[],l=[],c=[],h=[],u=[],m=[],p=[],d=r.Data[2e3].time,y=new Date(1e3*d),f=(y.getHours(),"0"+y.getMinutes()),g="0"+y.getSeconds(),v=(f.substr(-2),g.substr(-2),r.Data[2e3].close);$(".priceOutput").html(" "+v+" "+t),$(".dateOutput").html(" "+y);for(var D=1999;D>=1;D--){if(r.Data[D].close==[])D=0;else{n.push(r.Data[D].close),c.push(r.Data[D].low),h.push(r.Data[D].high),l.push(r.Data[D].open),u.push(i(new Date(1e3*(r.Data[D].time+86400)).toString()));var w=r.Data[D-1].close,x=r.Data[D].close;if(0===w)C=0;else var C=x/w-1;m.push(100*C)}var b=new Date(1e3*(r.Data[D].time+86400)).toString().substr(0,3);p.push(b)}s(u),a(e,t,0,r,n,c,h,l,u,p,m)}))}(e,t,r);else{for(var w=1999;w>=1;w--){if(o.Data[w].close==[])w=0;else{l.push(o.Data[w].close),h.push(o.Data[w].low),u.push(o.Data[w].high),c.push(o.Data[w].open),m.push(i(new Date(1e3*(o.Data[w].time+86400)).toString()));var x=o.Data[w-1].close,C=o.Data[w].close;if(0===x)b=0;else var b=C/x-1;p.push(100*b)}var T=new Date(1e3*(o.Data[w].time+86400)).toString().substr(0,3);d.push(T)}s(m),a(e,t,0,o,l,h,u,c,m,d,p)}}))}function t(){var t=$("#coinCompare1").val().toUpperCase(),a=$("#denom-choices").val().toUpperCase(),i=$("#dateEntry1").val(),r=$("#dateEntry2").val(),o=$("#dateEntry3").val(),n=new Date(o,i-1,r);unixEntered=n.getTime()/1e3+86400,e(t,a,unixEntered),3===menuItem&&(t=$("#coinCompare1").val().toUpperCase(),a=$("#denom-choices").val().toUpperCase(),i=$("#dateEntry1").val(),r=$("#dateEntry2").val(),o=$("#dateEntry3").val(),n=new Date(o,i-1,r),unixEntered=n.getTime()/1e3+86400,l(t,a,unixEntered))}function a(e,t,a,o,n,s,l,c,h,u,m){allTimeHighRatio=[],allTimeHighRatioDates=[],allTimeHighRelativePrice=[],allTimeHighPrice=0;for(var p=0;p<=1999;p++)if(o.Data[p].high>allTimeHighPrice&&o.Data[p].high<=5*o.Data[p].close){var d=o.Data[p].time+86400,y=new Date(1e3*d);(g=100*o.Data[p].close/allTimeHighPrice)<=500?allTimeHighRatio.push(g):allTimeHighRatio.push(100),allTimeHighRelativePrice.push(o.Data[p].close);var f=new Date(1e3*(o.Data[p].time+86400));allTimeHighRatioDates.push(f),allTimeHighPrice=o.Data[p].high}else if(0!==allTimeHighPrice){var g;(g=100*o.Data[p].close/allTimeHighPrice)<=500?allTimeHighRatio.push(g):allTimeHighRatio.push(100),allTimeHighRelativePrice.push(o.Data[p].close),f=new Date(1e3*(o.Data[p].time+86400)),allTimeHighRatioDates.push(f)}$(".allTimeHighPriceOutput").html("ATH of "+e+": "+allTimeHighPrice+"</br> on "+y.toString().substring(4,15)),function(e,t,a){$.get("https://min-api.cryptocompare.com/data/price?fsym="+e+"&tsyms="+t+"&e="+exchange,(function(a,i){currentPrice=a[t],allTimeHighPrice>0&&$(".currentPriceOutput").html("Current Price of "+e+": "+currentPrice+" "+t+"</br> ("+Math.round(currentPrice/allTimeHighPrice*1e4)/100+"% of ATH)")}))}(e,t),setTimeout((function(){!function(e,t,a,o,n,s,l,c,h,u,m,p,d,y,f){samePrice=[];for(var g=[],v=[],D=2e3;D>=0;D--)if(t>=a.Data[D].low&&t<=a.Data[D].high){var w=new Date(1e3*(a.Data[D].time+86400));samePrice.push(w)}for(samePrice.length,D=0;D<=samePrice.length-1;D++)intermediateConvert=i(samePrice[D].toString()),g.push(intermediateConvert),v.push(t);switch(menuItem){case 0:r(c,o,n,s,l,p,m,g,v);break;case 1:!function(e,t,a,i,r){var o=Plotly.d3.select("#myDiv").style({width:"100%","margin-left":"0%",height:"60vh","margin-top":"0vh","margin-bottom":0,"padding-bottom":0}).node();e=e.slice(0,filterDays);var n={x:t=t.slice(0,filterDays),text:a=a.slice(0,filterDays),y:e,mode:"markers",type:"scatter"},s={};$.each(t,(function(t,a){s[a]||(s[a]={weekValues:[]}),s[a].weekValues.push(e[t])}));for(var l=[],c=[],h=[],u=[],m=0;m<=6;m++)l.push(math.mean(s[t[m]].weekValues)),c.push(math.median(s[t[m]].weekValues)),h.push(math.std(s[t[m]].weekValues)),u.push(h[m]/math.sqrt(s[t[m]].weekValues.length)*1.96);var p={x:t,y:l,error_y:{type:"data",array:u,visible:!0},mode:"markers",type:"scatter",name:"Mean + CI"},d={x:t,y:c,mode:"markers",type:"scatter",name:"Median"};if(timeOffset>=0)var y={hovermode:"closest",title:"<b>Day of Week ("+i+")</b> <br> Use "+Number(24-timeOffset)+":00 of the previous day to make trades",xaxis:{title:"Date",titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0},yaxis:{title:"% Change("+r+")",type:"linear",autorange:!0,titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0},shapes:[{type:"line",x0:"Sun",x1:"Sat",y0:0,y1:0,line:{color:"rgb(50, 171, 96)",width:4,dash:"dashdot"}}]};else y={hovermode:"closest",title:"<b>Day of Week</b> <br> Use "+Number(0-timeOffset)+":00 of the current day to make trades",xaxis:{title:"Date",titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0},yaxis:{title:"% Change("+r+")",type:"linear",autorange:!0,titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0},shapes:[{type:"line",x0:"Sun",x1:"Sat",y0:0,y1:0,line:{color:"rgb(50, 171, 96)",width:4,dash:"dashdot"}}]};var f=[p,d],g=f;Plotly.newPlot(o,g,y),Plotly.relayout(o,{"xaxis.categoryarray":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}),$(".radio1").addClass("hide"),$(".radio2").removeClass("hide"),$("#radio2").click((function(){var e=f=1===f.length?[p,d]:[n];Plotly.newPlot(o,e,y)})),window.onresize=function(){Plotly.Plots.resize(o)}}(u,h,c,m,p);break;case 2:!function(e,t,a,i,r){var o=Plotly.d3.select("#myDiv").style({width:"100%","margin-left":"0%",height:"60vh","margin-top":"0vh","margin-bottom":0,"padding-bottom":0}).node(),n={x:t.slice(-filterDays),y:r.slice(-filterDays),mode:"lines",text:e.slice(-filterDays),type:"scatter"},s={title:"ATH Ratio "+i+"/"+a,xaxis:{title:"Date",titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0},yaxis:{title:"ATH %("+a+")",type:"linear",autorange:!0,titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0},shapes:[{type:"line",xref:"paper",x0:0,x1:1,y0:100,y1:100,line:{color:"rgb(50, 171, 96)",width:4,dash:"dashdot"}}]},l=[n];Plotly.newPlot(o,l,s),$(".radio2").addClass("hide"),$(".radio1").removeClass("hide"),$("#radio1").click((function(){"log"===s.yaxis.type?s.yaxis.type="linear":s.yaxis.type="log",Plotly.newPlot(o,l,s,{editable:!0})})),window.onresize=function(){Plotly.Plots.resize(o)}}(f,y,p,m,d)}}(0,currentPrice,o,n,s,l,c,h,u,m,e,t,allTimeHighRatio,allTimeHighRatioDates,allTimeHighRelativePrice)}),250)}function i(e){switch(e.substr(4,3)){case"Jan":convertMonth="01";break;case"Feb":convertMonth="02";break;case"Mar":convertMonth="03";break;case"Apr":convertMonth="04";break;case"May":convertMonth="05";break;case"Jun":convertMonth="06";break;case"Jul":convertMonth="07";break;case"Aug":convertMonth="08";break;case"Sep":convertMonth="09";break;case"Oct":convertMonth="10";break;case"Nov":convertMonth="11";break;case"Dec":convertMonth="12"}return e.substr(11,4)+"-"+convertMonth+"-"+e.substr(8,2)}function r(e,t,a,i,r,o,n,s,l){var c=Plotly.d3.select("#myDiv").style({width:"100%","margin-left":"0%",height:"60vh","margin-top":"0vh","margin-bottom":0,"padding-bottom":0}).node(),h={x:e.slice(0,filterDays),y:t.slice(0,filterDays),mode:"lines",name:"Close price",type:"scatter"},u={x:e.slice(0,filterDays),close:t.slice(0,filterDays),open:r.slice(0,filterDays),high:i.slice(0,filterDays),low:a.slice(0,filterDays),mode:"lines",name:"Close price",type:"candlestick"},m={x:s,y:l,mode:"markers",name:"Days at Same Price",type:"scatter",visible:"legendonly"},p={title:"Close Price "+n+" vs "+o,xaxis:{title:"Date",titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0,rangeslider:{visible:!1}},yaxis:{title:"Price("+o+")",type:"linear",autorange:!0,titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0},shapes:[{type:"line",xref:"paper",x0:0,x1:1,y0:currentPrice,y1:currentPrice,line:{color:"rgb(50, 11, 96)",width:1,dash:"dashdot"}}]};if(0===convert)var d=[u,m];else d=[h,m];Plotly.newPlot(c,d,p),$(".radio2").addClass("hide"),$(".radio1").removeClass("hide"),$("#radio1").click((function(){"log"===p.yaxis.type?p.yaxis.type="linear":p.yaxis.type="log",Plotly.newPlot(c,d,p)})),window.onresize=function(){Plotly.Plots.resize(c)}}function o(){$element=$('input[type="range"]'),function(){result=[];for(var e=0;e<2e3;e++){var t=new Date;t.setDate(t.getDate()-e),result.push((i=void 0,r=void 0,o=void 0,i=(a=t).getDate(),r=a.getMonth()+1,o=a.getFullYear(),i<10&&(i="0"+i),r<10&&(r="0"+r),a=r+"/"+i+"/"+o))}var a,i,r,o}(),$element.rangeslider({polyfill:!1,onInit:function(){n($(".rangeslider__handle",this.$range)[0],this.value),$(".filter-one").html(result[this.value]+" - "+result[0]),filterDays=this.value}}).on("input",(function(e){if(n($(".rangeslider__handle",e.target.nextSibling)[0],filterDays),Math.ceil(filterDays),$(".filter-one").html(result[filterDays]+" - "+result[0]),filterDays=this.value,3===menuItem){var a=$("#coinCompare1").val().toUpperCase(),i=$("#denom-choices").val().toUpperCase(),r=$("#dateEntry1").val(),o=$("#dateEntry2").val(),s=$("#dateEntry3").val(),c=new Date(s,r-1,o);unixEntered=c.getTime()/1e3+86400,l(a,i,unixEntered)}else t()})),n($(".rangeslider__handle")[0],filterDays),Math.ceil(filterDays),$(".filter-one").html(result[filterDays]+" - "+result[0])}function n(e,t){e.textContent=t}function s(e){maxDays=e.length,$(".filter1").max=maxDays}function l(e,t,a){var i=[],r=[],o=[],n=[],s=[];$.get("https://min-api.cryptocompare.com/data/histohour?fsym="+e+"&tsym="+t+"&limit=2000&aggregate=1&e="+exchange,(function(a,l){if("divide"===a.ConversionType.type)!function(e,t,a){var i=[],r=[],o=[],n=[],s=[];$.get("https://min-api.cryptocompare.com/data/histohour?fsym="+e+"&tsym="+t+"&limit=2000&aggregate=1&e="+exchange+"&tryConversion=false",(function(a,l){for(g=2001-24*filterDays;g<=a.Data.length-1;g++){var h=new Date(1e3*a.Data[g].time),u=h.toString().slice(16,18),m=a.Data[g].close,p=100*(a.Data[g].close/a.Data[g].open-1);i.push(h.toString().slice(4,15)),r.push(h.toString().slice(4,21)),o.push(u),n.push(m),s.push(p)}groups3={},$.each(o,(function(e,t){groups3[t]||(groups3[t]={hourValues:[]}),groups3[t].hourValues.push(s[e])}));for(var d=[],y=[],f=[],g=0;g<=23;g++)d.push(math.mean(groups3[o[g]].hourValues)),y.push(math.std(groups3[o[g]].hourValues)),f.push(y[g]/math.sqrt(groups3[o[g]].hourValues.length)*1.96);var v={x:o.slice(24*-filterDays),y:d.slice(24*-filterDays),error_y:{type:"data",array:f,visible:!0},mode:"markers",type:"scatter"};c(0,0,o,0,v,s,e,t,hourlyChangeMedian)}))}(e,t);else{for(g=2001-24*filterDays;g<=a.Data.length-1;g++){var h=new Date(1e3*a.Data[g].time),u=h.toString().slice(16,18),m=a.Data[g].close,p=100*(a.Data[g].close/a.Data[g].open-1);i.push(h.toString().slice(4,15)),r.push(h.toString().slice(4,21)),o.push(u),n.push(m),s.push(p)}groups3={},$.each(o,(function(e,t){groups3[t]||(groups3[t]={hourValues:[]}),groups3[t].hourValues.push(s[e])}));for(var d=[],y=[],f=[],g=0;g<=23;g++)d.push(math.mean(groups3[o[g]].hourValues)),y.push(math.std(groups3[o[g]].hourValues)),f.push(y[g]/math.sqrt(groups3[o[g]].hourValues.length)*1.96);var v={x:o.slice(24*-filterDays),y:d.slice(24*-filterDays),error_y:{type:"data",array:f,visible:!0},mode:"markers",type:"scatter"};c(0,0,o,0,v,s,e,t)}}))}function c(e,t,a,i,r,o,n,s,l){var c={x:a.slice(24*-filterDays),y:o.slice(24*-filterDays),mode:"markers",name:"Close price",type:"scatter"},h={title:"Hourly Change "+n+" vs "+s,xaxis:{title:"Hour (Local Time)",titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0},yaxis:{title:"% Change "+s,type:"linear",autorange:!0,titlefont:{family:"Courier New, monospace",size:18,color:"#7f7f7f"},fixedrange:!0}},u=r,m=[u];Plotly.newPlot("myDiv",m,h),Plotly.relayout("myDiv",{"xaxis.categoryarray":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}),$(".radio1").addClass("hide"),$(".radio2").removeClass("hide"),$("#radio2").click((function(){var e=[u=u===r?c:r];Plotly.newPlot("myDiv",e,h)}))}ethereumAddresses=[],samePrice=[],allTimeHighPrice=0,menuItem=0,filterDays=365,exchange="CCCAGG",$(document).ready((function(){var e=new Date;timeOffset=e.getTimezoneOffset()/60,e.getHours(),e.getMinutes();let t=e.getDate(),a=getDayNumber(t),i=getMonthName(e.getMonth()),r=getWeekDay(e.getDay());$(".date-num").html(t),$(".date-info").html(r+", "+i+" "+a+" ")})),$(".submit").click((function(){var t=$("#coinCompare1").val().toUpperCase(),a=$("#denom-choices").val().toUpperCase(),i=$("#dateEntry1").val(),r=$("#dateEntry2").val(),o=$("#dateEntry3").val(),n=new Date(o,i-1,r).getTime()/1e3+86400;e(t,a,n),3===menuItem&&(t=$("#coinCompare1").val().toUpperCase(),a=$("#denom-choices").val().toUpperCase(),i=$("#dateEntry1").val(),r=$("#dateEntry2").val(),o=$("#dateEntry3").val(),l(t,a,n=new Date(o,i-1,r).getTime()/1e3+86400))})),$(".nav-price").click((function(){menuItem=0,filterDays=365,o(),t()})),$(".nav-weekday").click((function(){menuItem=1,filterDays=30,o(),t()})),$(".nav-ath").click((function(){menuItem=2,filterDays=365,o(),t()})),$(".nav-hourly").click((function(){menuItem=3,filterDays=30,o();var e=$("#coinCompare1").val().toUpperCase(),t=$("#denom-choices").val().toUpperCase(),a=$("#dateEntry1").val(),i=$("#dateEntry2").val(),r=$("#dateEntry3").val(),n=new Date(r,a-1,i);unixEntered=n.getTime()/1e3+86400,l(e,t,unixEntered)})),o(),$(".dayEntry").on("keydown",(function(e){if(13==e.which){if($element.val(this.value).change(),t(),3===menuItem){var a=$("#coinCompare1").val().toUpperCase(),i=$("#denom-choices").val().toUpperCase(),r=$("#dateEntry1").val(),n=$("#dateEntry2").val(),s=$("#dateEntry3").val(),c=new Date(s,r-1,n);unixEntered=c.getTime()/1e3+86400,l(a,i,unixEntered)}o()}})),$(".coinEntry").on("keydown",(function(t){if(13==t.which){var a=$("#coinCompare1").val().toUpperCase(),i=$("#denom-choices").val().toUpperCase(),r=$("#dateEntry1").val(),o=$("#dateEntry2").val(),n=$("#dateEntry3").val(),s=new Date(n,r-1,o).getTime()/1e3+86400;e(a,i,s),3===menuItem&&(a=$("#coinCompare1").val().toUpperCase(),i=$("#denom-choices").val().toUpperCase(),r=$("#dateEntry1").val(),o=$("#dateEntry2").val(),n=$("#dateEntry3").val(),l(a,i,s=new Date(n,r-1,o).getTime()/1e3+86400))}})),document.getElementById("exchange-choices").addEventListener("change",(function(){if(exchange=this.value,t(),3===menuItem){var e=$("#coinCompare1").val().toUpperCase(),a=$("#denom-choices").val().toUpperCase(),i=$("#dateEntry1").val(),r=$("#dateEntry2").val(),o=$("#dateEntry3").val(),n=new Date(o,i-1,r);unixEntered=n.getTime()/1e3+86400,l(e,a,unixEntered)}})),document.getElementById("denom-choices").addEventListener("change",(function(){if(a=this.value,t(),3===menuItem){var e=$("#coinCompare1").val().toUpperCase(),a=$("#denom-choices").val().toUpperCase(),i=$("#dateEntry1").val(),r=$("#dateEntry2").val(),o=$("#dateEntry3").val(),n=new Date(o,i-1,r);unixEntered=n.getTime()/1e3+86400,l(e,a,unixEntered)}})),jQuery(document).ready((function(e){var t={0:"The Price chart shows the daily close price of a given coin pairing (see chart title) over time",1:"The Weekday chart shows the amount of daily change (close/open - 1) for each weekday over a given time period. A confidence interval is calculated and shown with Error Bars. Data is based on GMT time but the suggested time to make decisions is listed on the chart and is based on the timezone given by your network.",2:"The All Time High chart shows the close price of each day versus the ATH reached prior to that date. For instance, if on January 1st an ATH of $100 was reached but on January 2nd our close price was $110, the value on the chart for Jan 2 would show 110% of ATH for that day. However, if on January 3rd the price stayed stable at $110, the chart value for Jan 3 would be 100%. This may be a useful tool for setting limit buys as it suggests the absolute lowest the price dropped relative to historical ATHs in the past.",3:"The Hourly chart shows the amount of hourly change (close/open - 1) for up to the past 2000 hours. The goal of the chart is to identify patterns in price action based on time zone. As with the Weekly chart, confidence intervals are used."};e(".popup-trigger").on("click",(function(a){a.preventDefault(),e(".popup").addClass("is-visible"),e(".popup-container").html(t[menuItem])})),e(".popup").on("click",(function(t){(e(t.target).is(".popup-close")||e(t.target).is(".popup"))&&(t.preventDefault(),e(this).removeClass("is-visible"))})),e(document).keyup((function(t){"27"==t.which&&e(".popup").removeClass("is-visible")}))}))})();